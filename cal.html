<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="css/cal.css" />
		<link rel="stylesheet" type="text/css" href="css/foundation.css" />
	</head>
	<body>
		<!--start calender-->
		<!-- calender header/ nav bar-->
		<div style="text-align: center;"> 
			<div class=month style="display:inline-block;">
				<ul>
					<li><a class=pointer-left>&#10094;</a></li>
					<li><h3 class=title-phrase>November 2016</h3></li>
					<li><a class=pointer-right>&#10095;</a></li>
				</ul>
			</div>
		</div>
		<!--week title pane-->
		<table class=calendar> 
			<tr> <th> 
				<p>Monday</p>
				</th>
			<th>
				<p>Tuesday</p>
				</th>
			<th>
				<p>Wednesday</p>
				</th> 
			<th>
				<p>Thursday</p>
				</th> 
			<th>
				<p>Friday</p>
				</th> 
			<th>
				<p>Saturday</p>
				</th> 
			<th>
				<p>Sunday</p>
				</th>
			<th style="background-color: white;">
				<p style="color:black;">Week</p>
				</th> 
		</tr> <tr>
			<td>
				<p class=date>Nov 1</p>
				<div>
					<button class="u2 workout-button">20k</button>
				</div>
				</td>
			<td>
				<p class=date>Nov 2</p>
				<div>
					<button class="test workout-button">6k test</button>
				</div>
				</td>
			<td>
				<p class=date>Nov 3</p>
				<div>
					<button class="u1 workout-button">6k test</button>
					<button class="an workout-button">2 x 5 x 1'</button>
					<button class="u2 workout-button">20k</button>
				</div>
				</td>
			<td>
				<p class=date>Nov 4</p>
				<div> </div>
				</td>
			<td>
				<p class=date>Nov 5</p>
				<div>
					<button class="tr workout-button">4 x 2k</button>
				</div></td>
			<td>
				<p class=date>Nov 6</p>
				<div>
					<button class="at workout-button">45'</button>
				</div>
				</td>
			<td>
				<p class=date>Nov 7</p>
				<div>
					<button class="comp workout-button">HOTO</button>
				</div>
				</td>
			<td class=end-block>
				<ul>
					<li>120,234m</li>
					<li>8.54 hrs</li>
				</ul> </td>
		</tr> <tr>
			<td style="background-color:#00FFAA;">
				<p class=date>Nov 1</p>
				<div>
					<button class="comp workout-button">20k</button>
				</div>
				</td>
			<td>
				<p class=date>Nov 2</p>
				<div>
					<button class="u2 workout-button">6k test</button>
				</div>
				</td>
			<td>
				<p class=date>Nov 3</p>
				<div>
				</div>
				</td>
			<td>
				<p class=date>Nov 4</p>
				<div><button class="u1 workout-button">6k test</button>
					</div>
				</td>
			<td>
				<p class=date>Nov 5</p>
				<div>
					<button class="at workout-button">4 x 2k</button>
				</div></td>
			<td>
				<p class=date>Nov 6</p>
				<div>
					<button class="tr workout-button">45'</button>
				</div>
				</td>
			<td>
				<p class=date>Nov 7</p>
				<div>
					<button class="test workout-button">HOTO</button>
				</div>
				</td>
			<td class=end-block>
				<ul>
					<li>120,234m</li>
					<li>8.54 hrs</li>
				</ul> </td>
		</tr> <tr>
			<td>
				<p class=date>Nov 1</p>
				<div>
					<button class="comp workout-button">20k</button>
				</div>
				</td>
			<td>
				<p class=date>Nov 2</p>
				<div>
					<button class="u2 workout-button">6k test</button>
				</div>
				</td>
			<td>
				<p class=date>Nov 3</p>
				<div>
				</div>
				</td>
			<td>
				<p class=date>Nov 4</p>
				<div><button class="u1 workout-button">6k test</button>
					</div>
				</td>
			<td>
				<p class=date>Nov 5</p>
				<div>
					<button class="at workout-button">4 x 2k</button>
				</div></td>
			<td>
				<p class=date>Nov 6</p>
				<div>
					<button class="tr workout-button">45'</button>
				</div>
				</td>
			<td>
				<p class=date>Nov 7</p>
				<div>
					<button class="test workout-button">HOTO</button>
				</div>
				</td>
			<td class=end-block>
				<ul>
					<li>120,234m</li>
					<li>8.54 hrs</li>
				</ul> </td>
		</tr> <tr>
			<td>
				<p class=date>Nov 1</p>
				<div>
					<button class="comp workout-button">20k</button>
				</div>
				</td>
			<td>
				<p class=date>Nov 2</p>
				<div>
					<button class="u2 workout-button">6k test</button>
				</div>
				</td>
			<td>
				<p class=date>Nov 3</p>
				<div>
				</div>
				</td>
			<td>
				<p class=date>Nov 4</p>
				<div><button class="u1 workout-button">6k test</button>
					</div>
				</td>
			<td>
				<p class=date>Nov 5</p>
				<div>
					<button class="at workout-button">4 x 2k</button>
				</div></td>
			<td>
				<p class=date>Nov 6</p>
				<div>
					<button class="tr workout-button">45'</button>
				</div>
				</td>
			<td>
				<p class=date>Nov 7</p>
				<div>
					<button class="test workout-button">HOTO</button>
				</div>
				</td>
			<td class=end-block>
				<ul>
					<li>120,234m</li>
					<li>8.54 hrs</li>
				</ul> </td>
		</tr> </table>
		<br>
		<!--dynamic generation of the feature set -->
		<table class=calendar id=page_calendar> 
			<script>
				var days_in_month = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
				var cal_table = document.getElementById("page_calendar");
				var header_row = document.createElement("tr");
				
				var parts_of_banner = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Totals"];
				//DAYS OF THE WEEK FOLLOW THE .CALENDAR STANDARD
				for (i = 0; i < parts_of_banner.length - 1; i++){
					var header_piece = document.createElement("th");
					var heading = document.createElement("p");
					var textheading = document.createTextNode(parts_of_banner[i]);
					heading.appendChild(textheading);
					header_piece.appendChild(heading);
					header_row.appendChild(header_piece);
				}
				//THE SPECIAL CASE OF THE WEEKLY TOTAL HEADER
				var header_piece = document.createElement("th");
				var heading = document.createElement("p");
				heading.style.color = "black";
				header_piece.style.backgroundColor = "white";
				var textheading = document.createTextNode(parts_of_banner[parts_of_banner.length-1]);
				heading.appendChild(textheading);
				header_piece.appendChild(heading);
				header_row.appendChild(header_piece);
				//PLACE HEADER IN
				cal_table.appendChild(header_row);
				//BEGIN PLACING ROWS
					//start by figuring out where to start landing the date
				var makeCal = [];
				var now = new Date();
				var nowDay = now.getDay();
				var TodaysDateString = parseInt(now.getMonth()+1) + "/" + parseInt(now.getDate());
				for(day = now.getDate(); day > 0; day--){ //putting today and all days prior in order
					var date_string = parseInt(now.getMonth() + 1) + "/" + day;
					makeCal.unshift({"p": date_string});
					nowDay--;
					if(nowDay < 0){ //reset
						nowDay = 6;
					}
				}
				lastMonth = now.getMonth()-1;
				if(lastMonth < 0){
					lastMonth = 11;
				}
				for(i = 0; nowDay >=0; nowDay--){  //completing the 35 day set's front end
					var date_string = parseInt(lastMonth+1) + "/" + parseInt(days_in_month[lastMonth] - i);
					makeCal.unshift({"p": date_string});
					i++;
				}
				nowDay = now.getDay()+1;  //reset week day to count forward
				for(day = now.getDate()+1; day <= days_in_month[now.getMonth()]; day++){
					var date_string = parseInt(now.getMonth()+1) + "/" + day;
					makeCal.push({"p": date_string});
					nowDay++;
					if(nowDay > 6){ //reset
						nowDay = 0;
					}
				}
				nextMonth = now.getMonth() + 1;
				if(nextMonth > 11){
					nextMonth = 0;
				}
				for(i = 1; nowDay < 7; nowDay++){
					var date_string = parseInt(nextMonth + 1) + "/" + parseInt(i);
					makeCal.push({"p": date_string});
					i++;
				}
					//we now have a 35 long array containing JSONS of all the data we need
					//creating each 8 day long block
				var EndData = ["134,568m", "15.5hrs"];
				i = 0
				while(i < makeCal.length){
					var tr = document.createElement("tr");
					for(j = 0; j < 7; j++){
						var td = document.createElement("td");
						var p = document.createElement("p");
						p.className = "date";
						p.appendChild(document.createTextNode(makeCal[i]["p"]));
						var button_div = document.createElement("div");
						td.appendChild(p);
						td.appendChild(button_div);
						if (TodaysDateString == makeCal[i]["p"]){
							td.style.backgroundColor = "#00FFAA";
						}
						tr.appendChild(td);
						i++;
					}
					endTd = document.createElement("td");
					endTd.className = "end-block";
					ul = document.createElement("ul");
					liMeters = document.createElement("li");
					liMeters.appendChild(document.createTextNode(EndData[0]));
					liHours = document.createElement("li");
					liHours.appendChild(document.createTextNode(EndData[1]));
					ul.appendChild(liMeters);
					ul.appendChild(liHours);
					endTd.appendChild(ul);
					tr.appendChild(endTd);
					
					cal_table.appendChild(tr);
					
				}
				console.log(makeCal);
			</script>
		</table>
	</body>
</html>